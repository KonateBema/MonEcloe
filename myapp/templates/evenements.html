{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <h2 class="mb-4 fw-bold text-white bg-primary p-3 rounded text-center">
        Événements institutionnels
    </h2>

    {% if evenements %}
    <div class="row g-4 mt-3">
        {% for evenement in evenements %}
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">

                    <h5 class="card-title">{{ evenement.titre }}</h5>
                    {% if evenement.description %}
                    <p class="card-text">{{ evenement.description|truncatechars:100 }}</p>
                    {% endif %}

                    <!-- Image avec Lightbox -->
                    {% if evenement.image %}
                    <a href="{{ evenement.image.url }}" data-lightbox="evenement-{{ evenement.id }}" data-title="{{ evenement.titre }}">
                        <img src="{{ evenement.image.url }}" class="card-img-top mb-2" alt="{{ evenement.titre }}">
                    </a>
                    {% endif %}

                    <!-- Vidéo avec Lightbox (iframe) -->
                    {% if evenement.video %}
                    <video class="w-100 mb-2" controls>
                        <source src="{{ evenement.video.url }}" type="video/mp4">
                        Votre navigateur ne supporte pas la vidéo.
                    </video>
                    {% endif %}

                    {% if evenement.date_event %}
                    <small class="text-muted mt-auto">Date: {{ evenement.date_event }}</small>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-center mt-4">Aucun événement pour le moment.</p>
    {% endif %}
</div>
{% endblock %}