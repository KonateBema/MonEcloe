{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Certificats - {{ home_data.site_name }}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; }
.header { text-align: center; padding: 60px 20px; background: linear-gradient(90deg, #0d6efd, #6610f2); color: white; border-radius: 12px; margin-bottom: 40px; }
.cert-card { border-radius: 18px; overflow: hidden; transition: 0.3s; background: #fff; height: 100%; display: flex; flex-direction: column; }
.cert-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
.cert-card img { height: 180px; object-fit: cover; }
.btn-pass { margin-top: auto; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <h1>Nos Certificats</h1>
  <p>Passez vos certificats en ligne facilement</p>
</div>

<!-- BOUTON RETOUR ACCUEIL -->
<div class="container text-center mb-4">
  <a href="{% url 'home' %}" class="btn btn-outline-secondary btn-lg">← Retour à l’accueil</a>
</div>

<!-- LISTE DES CERTIFICATS -->
<div class="container">
  <div class="row g-4">
    {% for cert in certificats %}
    <div class="col-md-6 col-lg-4 d-flex">
      <div class="cert-card shadow p-3">
        {% if cert.image %}
          <img src="{{ cert.image.url }}" class="w-100 mb-3">
        {% endif %}
        <h5 class="fw-bold text-primary">{{ cert.titre }}</h5>
        <p class="text-muted">{{ cert.description|truncatechars:120 }}</p>
        <div class="mt-auto d-flex justify-content-between">
          <button type="button" class="btn btn-primary btn-pass" data-bs-toggle="modal" data-bs-target="#modal{{ forloop.counter }}">Détails</button>
          {% if cert.lien_passage %}
          <a href="{{ cert.lien_passage }}" target="_blank" class="btn btn-success btn-pass">Passer en ligne</a>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- MODAL -->
    <div class="modal fade" id="modal{{ forloop.counter }}">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5>{{ cert.titre }}</h5>
            <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <p>{{ cert.details }}</p>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            {% if cert.lien_passage %}
            <a href="{{ cert.lien_passage }}" target="_blank" class="btn btn-success">Passer en ligne</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    {% endfor %}
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
